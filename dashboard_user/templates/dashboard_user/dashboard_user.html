{% extends "dashboard_user/base.html" %}
{% load static %}

{% block page_title %}User Dashboard{% endblock %}

{% block dashboard_content %}
<div class="dashboard-content-container">
    <!-- PART 1: Actionable Items -->
    <div class="dashboard-part">
        <div class="dashboard-grid">
            
            <!-- My Mentors (Col 4) -->
            <div class="dashboard-card col-span-4">
                <div class="card-header">
                    <h3 class="card-title">My Mentors</h3>
                    <div class="card-actions">
                        <button class="action-btn green" title="Add Mentor"><i class="fas fa-user-plus"></i></button>
                        <button class="action-btn blue" title="Create Project"><i class="fas fa-plus"></i></button>
                        <div class="dropdown">
                            <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                            <div class="dropdown-menu">
                                <button class="dropdown-item">Project Details</button>
                                <button class="dropdown-item">Edit Project</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mentor 1: Single Project -->
                <div class="mentor-row">
                    <a href="#" class="mentor-header">
                        <div class="mentor-avatar">üë®‚Äçüíº</div>
                        <div class="mentor-info">
                            <span class="mentor-name">Dr. Sarah Smith</span>
                        </div>
                    </a>
                    <div class="project-list-container">
                        <div class="project-item active">
                            <span class="project-item-name">HealthTech Startup</span>
                            <div class="project-actions">
                                <div class="dropdown">
                                    <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                                    <div class="dropdown-menu">
                                        <button class="dropdown-item">Project Details</button>
                                        <button class="dropdown-item">Edit Project</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mentor 2: Single Project -->
                <div class="mentor-row">
                    <a href="#" class="mentor-header">
                        <div class="mentor-avatar">üë©‚Äçüíº</div>
                        <div class="mentor-info">
                            <span class="mentor-name">Michael Chen</span>
                        </div>
                    </a>
                    <div class="project-list-container">
                        <div class="project-item">
                            <span class="project-item-name">E-Commerce Platform</span>
                            <div class="project-actions">
                                <span class="project-notification orange">3</span>
                                <div class="dropdown">
                                    <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                                    <div class="dropdown-menu">
                                        <button class="dropdown-item">Project Details</button>
                                        <button class="dropdown-item">Edit Project</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Mentor 3: Multiple Projects -->
                <div class="mentor-row">
                    <a href="#" class="mentor-header">
                        <div class="mentor-avatar">üë®‚Äçüè´</div>
                        <div class="mentor-info">
                            <span class="mentor-name">Prof. James Wilson</span>
                        </div>
                    </a>
                    <div class="project-list-container">
                        <div class="project-item">
                            <span class="project-item-name">AI Research Lab</span>
                            <div class="project-actions">
                                <div class="dropdown">
                                    <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                                    <div class="dropdown-menu">
                                        <button class="dropdown-item">Project Details</button>
                                        <button class="dropdown-item">Edit Project</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="project-item">
                            <span class="project-item-name">EdTech Innovation</span>
                            <div class="project-actions">
                                <span class="project-notification red">5</span>
                                <div class="dropdown">
                                    <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                                    <div class="dropdown-menu">
                                        <button class="dropdown-item">Project Details</button>
                                        <button class="dropdown-item">Edit Project</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tasks To Do (Col 4) -->
            <div class="dashboard-card col-span-4">
                <div class="card-header">
                    <h3 class="card-title">Tasks to Do</h3>
                    <div class="tabs">
                        <button class="tab-btn active">Today</button>
                        <button class="tab-btn">Week</button>
                        <button class="tab-btn">All</button>
                    </div>
                </div>

                <!-- Task Row 1 -->
                <div class="task-row">
                    <div class="status-circle orange"></div>
                    <div class="task-info">
                        <span class="task-name">Review Financials</span>
                        <span class="task-status-text">Due Today</span>
                    </div>
                    <div class="completion-circle" onclick="toggleTask(this)"><i class="fas fa-check"></i></div>
                    <div class="dropdown">
                        <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item">Edit Task</button>
                            <button class="dropdown-item" style="color: var(--status-red);">Deactivate</button>
                        </div>
                    </div>
                </div>

                <!-- Task Row 2 -->
                <div class="task-row">
                    <div class="status-circle red"></div>
                    <div class="task-info">
                        <span class="task-name">Draft Pitch Deck</span>
                        <span class="task-status-text">Overdue</span>
                    </div>
                    <div class="completion-circle" onclick="toggleTask(this)"><i class="fas fa-check"></i></div>
                    <div class="dropdown">
                        <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item">Edit Task</button>
                            <button class="dropdown-item" style="color: var(--status-red);">Deactivate</button>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 16px;">
                    <a href="#" class="btn-link">View All Tasks</a>
                </div>
            </div>

            <!-- Completed Tasks (Col 4) -->
            <div class="dashboard-card col-span-4">
                <div class="card-header">
                    <h3 class="card-title">Completed Tasks</h3>
                    <div class="tabs">
                        <button class="tab-btn active">Today</button>
                        <button class="tab-btn">Week</button>
                    </div>
                </div>

                <!-- Completed Task Row -->
                <div class="task-row">
                    <div class="status-circle green"></div>
                    <div class="task-info">
                        <span class="task-name">Initial Consultation</span>
                        <span class="task-status-text">Completed</span>
                    </div>
                    <div class="completion-circle completed"><i class="fas fa-check"></i></div>
                    <div class="dropdown">
                        <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item">View Details</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sessions (Full Width) -->
            <div class="dashboard-card col-span-12">
                <div class="card-header" style="align-items: flex-start;">
                    <h3 class="card-title">Sessions</h3>
                    <div style="display: flex; gap: 16px; align-items: center; white-space: nowrap;">
                        <a href="{% url 'dashboard:dashboard_user:my_sessions' %}" class="btn-link">View Calendar</a>
                        <a href="#" class="btn-link" style="color: var(--dash-text-muted);">Session History</a>
                        <button class="btn btn-primary btn-sm" style="white-space: nowrap;">
                            <i class="fas fa-plus"></i> Schedule Session
                        </button>
                    </div>
                </div>
                
                <div class="session-timeline-container">
                    <!-- Session Item 1: All Completed -->
                    <div class="session-item confirmed status-completed">
                        <div class="session-left">
                            <div class="session-date">
                                <span class="date-day">28</span>
                                <span class="date-month">Nov</span>
                            </div>
                            <div class="session-info">
                                <h4 class="session-title">Strategy Review</h4>
                                <div class="session-meta-row">
                                    <span class="session-time"><i class="far fa-clock"></i> 10:00 AM - 11:00 AM</span>
                                    <span class="conf-tag confirmed">Confirmed</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="session-right">
                            <div class="session-tasks">
                                <div class="task-badge completed">
                                    <span class="task-label">Completed</span>
                                    <span class="task-count">2</span>
                                </div>
                            </div>
                            <div class="dropdown">
                                <button class="session-action-btn" onclick="toggleDropdown(this)">
                                    <i class="fas fa-ellipsis-h"></i>
                                </button>
                                <div class="dropdown-menu">
                                    <button class="dropdown-item">View Details</button>
                                    <button class="dropdown-item">Edit Session</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Session Item 2: Tasks Pending -->
                    <div class="session-item confirmed status-pending">
                        <div class="session-left">
                            <div class="session-date">
                                <span class="date-day">05</span>
                                <span class="date-month">Dec</span>
                            </div>
                            <div class="session-info">
                                <h4 class="session-title">Leadership Workshop</h4>
                                <div class="session-meta-row">
                                    <span class="session-time"><i class="far fa-clock"></i> 2:00 PM - 3:30 PM</span>
                                    <span class="conf-tag confirmed">Confirmed</span>
                                </div>
                            </div>
                        </div>

                        <div class="session-right">
                            <div class="session-tasks">
                                <div class="task-badge pending">
                                    <span class="task-label">Pending</span>
                                    <span class="task-count">1</span>
                                </div>
                            </div>
                            <div class="dropdown">
                                <button class="session-action-btn" onclick="toggleDropdown(this)">
                                    <i class="fas fa-ellipsis-h"></i>
                                </button>
                                <div class="dropdown-menu">
                                    <button class="dropdown-item">View Details</button>
                                    <button class="dropdown-item">Edit Session</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Session Item 3: Tasks Missed -->
                    <div class="session-item tbc status-missed">
                        <div class="session-left">
                            <div class="session-date">
                                <span class="date-day">12</span>
                                <span class="date-month">Dec</span>
                            </div>
                            <div class="session-info">
                                <h4 class="session-title">Q4 Planning</h4>
                                <div class="session-meta-row">
                                    <span class="session-time"><i class="far fa-clock"></i> 11:00 AM - 12:30 PM</span>
                                    <span class="conf-tag tbc">To Be Confirmed</span>
                                </div>
                            </div>
                        </div>

                        <div class="session-right">
                            <div class="session-tasks">
                                <div class="task-badge completed">
                                    <span class="task-label">Completed</span>
                                    <span class="task-count">1</span>
                                </div>
                                <div class="task-badge missed">
                                    <span class="task-label">Missed</span>
                                    <span class="task-count">2</span>
                                </div>
                            </div>
                            <div class="dropdown">
                                <button class="session-action-btn" onclick="toggleDropdown(this)">
                                    <i class="fas fa-ellipsis-h"></i>
                                </button>
                                <div class="dropdown-menu">
                                    <button class="dropdown-item">View Details</button>
                                    <button class="dropdown-item">Edit Session</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>

    <!-- PART 2: Metrics & Identity -->
    <div class="dashboard-part">
        <!-- Section Header with Separator -->
        <div class="section-header">
            <h2 class="section-title">Progress & Metrics</h2>
            <span class="mentor-link">Supervised by <a href="#">Dr. Sarah Smith</a></span>
        </div>
        
        <!-- Identity Progress Row -->
        <div class="identity-progress-row">
            <div class="identity-card">
                <span class="identity-label">Leadership</span>
                <div class="progress-vertical-container">
                    <div class="progress-vertical-bar" style="height: 75%;"></div>
                </div>
                <span class="identity-percentage">75%</span>
            </div>
            <div class="identity-card">
                <span class="identity-label">Strategy</span>
                <div class="progress-vertical-container">
                    <div class="progress-vertical-bar" style="height: 45%;"></div>
                </div>
                <span class="identity-percentage">45%</span>
            </div>
            <div class="identity-card">
                <span class="identity-label">Execution</span>
                <div class="progress-vertical-container">
                    <div class="progress-vertical-bar" style="height: 90%;"></div>
                </div>
                <span class="identity-percentage">90%</span>
            </div>
            <div class="identity-card">
                <span class="identity-label">Communication</span>
                <div class="progress-vertical-container">
                    <div class="progress-vertical-bar" style="height: 60%;"></div>
                </div>
                <span class="identity-percentage">60%</span>
            </div>
        </div>

        <div class="dashboard-grid">
            <!-- Startup Metrics Radar (Col 6) -->
            <div class="dashboard-card col-span-6">
                <div class="card-header">
                    <h3 class="card-title">Startup Maturity</h3>
                    <i class="fas fa-info-circle" style="color: var(--dash-text-muted);"></i>
                </div>
                <div class="chart-container">
                    <canvas id="startupRadarChart"></canvas>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Load Dashboard JS -->
<script src="{% static 'js/dashboard.js' %}"></script>
{% endblock %}
