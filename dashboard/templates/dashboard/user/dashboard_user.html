{% extends "dashboard/user/base.html" %}
{% load static %}

{% block page_title %}User Dashboard{% endblock %}

{% block dashboard_content %}
<div class="dashboard-content-container">
    <h1 class="dashboard-page-title">Dashboard</h1>

    <!-- PART 1: Actionable Items -->
    <div class="dashboard-part">
        <div class="dashboard-grid">
            
            <!-- My Mentors (Col 6) -->
            <div class="dashboard-card col-span-6">
                <div class="card-header">
                    <h3 class="card-title">My Mentors</h3>
                    <div class="card-actions">
                        <button class="action-btn green" title="Create New Project"><i class="fas fa-plus"></i></button>
                        <button class="action-btn blue" title="Find Mentor"><i class="fas fa-user-plus"></i></button>
                        <div class="dropdown">
                            <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                            <div class="dropdown-menu">
                                <button class="dropdown-item">Edit Connections</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Mentor Row 1 -->
                <div class="mentor-row">
                    <div class="mentor-avatar"><i class="fas fa-user"></i></div>
                    <div class="mentor-info">
                        <span class="mentor-name">Dr. Sarah Smith</span>
                        <span class="mentor-project">Project: Market Entry Strategy</span>
                    </div>
                    <div class="dropdown">
                        <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-v"></i></button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item">Mentor Profile</button>
                            <button class="dropdown-item">Project Details</button>
                        </div>
                    </div>
                </div>

                <!-- Mentor Row 2 (No Project) -->
                <div class="mentor-row">
                    <div class="mentor-avatar"><i class="fas fa-user"></i></div>
                    <div class="mentor-info">
                        <span class="mentor-name">James Wilson</span>
                        <span class="mentor-project" style="color: var(--status-orange);">No project assigned yet</span>
                    </div>
                    <div class="dropdown">
                        <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-v"></i></button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item">Mentor Profile</button>
                            <button class="dropdown-item">Assign Project</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tasks To Do (Col 6) -->
            <div class="dashboard-card col-span-6">
                <div class="card-header">
                    <h3 class="card-title">Tasks to Do</h3>
                    <div class="tabs">
                        <button class="tab-btn active">Today</button>
                        <button class="tab-btn">Week</button>
                        <button class="tab-btn">All</button>
                    </div>
                </div>

                <!-- Task Row 1 -->
                <div class="task-row">
                    <div class="status-circle green"></div>
                    <div class="task-info">
                        <span class="task-name">Review Financials</span>
                        <span class="task-status-text">On Track</span>
                    </div>
                    <div class="completion-circle" onclick="toggleTask(this)"><i class="fas fa-check"></i></div>
                    <div class="dropdown">
                        <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item">Edit Task</button>
                            <button class="dropdown-item" style="color: var(--status-red);">Deactivate</button>
                        </div>
                    </div>
                </div>

                <!-- Task Row 2 -->
                <div class="task-row">
                    <div class="status-circle orange"></div>
                    <div class="task-info">
                        <span class="task-name">Draft Pitch Deck</span>
                        <span class="task-status-text">Due Soon</span>
                    </div>
                    <div class="completion-circle" onclick="toggleTask(this)"><i class="fas fa-check"></i></div>
                    <div class="dropdown">
                        <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item">Edit Task</button>
                            <button class="dropdown-item" style="color: var(--status-red);">Deactivate</button>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 16px;">
                    <a href="#" class="btn-link">View All Tasks</a>
                </div>
            </div>

            <!-- Completed Tasks (Col 6) -->
            <div class="dashboard-card col-span-6">
                <div class="card-header">
                    <h3 class="card-title">Completed Tasks</h3>
                    <div class="tabs">
                        <button class="tab-btn active">Today</button>
                        <button class="tab-btn">Week</button>
                    </div>
                </div>

                <!-- Completed Task Row -->
                <div class="task-row">
                    <div class="status-circle grey"></div>
                    <div class="task-info">
                        <span class="task-name">Initial Consultation</span>
                        <span class="task-status-text">Done</span>
                    </div>
                    <div class="completion-circle completed"><i class="fas fa-check"></i></div>
                    <div class="dropdown">
                        <button class="action-btn ghost" onclick="toggleDropdown(this)"><i class="fas fa-ellipsis-h"></i></button>
                        <div class="dropdown-menu">
                            <button class="dropdown-item">View Details</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sessions (Full Width) -->
            <div class="dashboard-card col-span-12">
                <div class="card-header">
                    <h3 class="card-title">Sessions</h3>
                    <a href="{% url 'dashboard:user:my_sessions' %}" class="btn-link">View Calendar</a>
                </div>
                <div class="session-item">
                    <div class="session-date">
                        <span class="date-day">28</span>
                        <span class="date-month">Nov</span>
                    </div>
                    <div class="session-info">
                        <h4 style="margin: 0 0 4px;">Strategy Review</h4>
                        <p style="margin: 0 0 8px; font-size: 0.9rem; color: var(--dash-text-muted);">10:00 AM - 11:00 AM â€¢ Dr. Sarah Smith</p>
                        <div style="display: flex; gap: 8px;">
                            <span class="badge badge-success">Confirmed</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <!-- PART 2: Metrics & Identity -->
    <div class="dashboard-part">
        <h2 class="dashboard-page-title" style="font-size: 1.5rem; margin-bottom: 24px;">Progress & Metrics</h2>
        
        <!-- Identity Progress Row -->
        <div class="identity-progress-row">
            <div class="identity-card">
                <span class="identity-label">Leadership</span>
                <div class="progress-vertical-container">
                    <div class="progress-vertical-bar" style="height: 75%;"></div>
                </div>
                <span class="identity-percentage">75%</span>
            </div>
            <div class="identity-card">
                <span class="identity-label">Strategy</span>
                <div class="progress-vertical-container">
                    <div class="progress-vertical-bar" style="height: 45%;"></div>
                </div>
                <span class="identity-percentage">45%</span>
            </div>
            <div class="identity-card">
                <span class="identity-label">Execution</span>
                <div class="progress-vertical-container">
                    <div class="progress-vertical-bar" style="height: 90%;"></div>
                </div>
                <span class="identity-percentage">90%</span>
            </div>
            <div class="identity-card">
                <span class="identity-label">Communication</span>
                <div class="progress-vertical-container">
                    <div class="progress-vertical-bar" style="height: 60%;"></div>
                </div>
                <span class="identity-percentage">60%</span>
            </div>
        </div>

        <div class="dashboard-grid">
            <!-- Startup Metrics Radar (Col 6) -->
            <div class="dashboard-card col-span-6">
                <div class="card-header">
                    <h3 class="card-title">Startup Maturity</h3>
                    <i class="fas fa-info-circle" style="color: var(--dash-text-muted);"></i>
                </div>
                <div class="chart-container">
                    <canvas id="startupRadarChart"></canvas>
                </div>
            </div>
        </div>
    </div>

</div>

<!-- Load Dashboard JS -->
<script src="{% static 'js/dashboard.js' %}"></script>
{% endblock %}
