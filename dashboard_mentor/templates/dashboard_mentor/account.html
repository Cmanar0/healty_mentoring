{% extends "dashboard_mentor/base.html" %}
{% load static %}

{% block page_title %}My Account{% endblock %}

{% block dashboard_content %}
<div class="dashboard-content-container">
    <h1 class="dashboard-page-title">My Account</h1>

    <div class="dashboard-grid">
        <!-- Profile Card -->
        <div class="dashboard-card col-span-4">
            <div style="text-align: center; padding: 20px 0;">
                <div style="width: 100px; height: 100px; background: #f1f5f9; border-radius: 50%; margin: 0 auto 16px; display: flex; align-items: center; justify-content: center; font-size: 2.5rem; color: var(--dash-text-muted);">
                    {% if user.profile.profile_picture %}
                        <img src="{{ user.profile.profile_picture.url }}" alt="Profile" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover;">
                    {% else %}
                        <i class="fas fa-user"></i>
                    {% endif %}
                </div>
                <h3 style="margin: 0 0 4px; color: var(--dash-text-main);">{{ user.profile.first_name }} {{ user.profile.last_name }}</h3>
                <p style="margin: 0; color: var(--dash-text-muted);">Mentor</p>
                <div style="margin-top: 24px;">
                   <form method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <!-- Placeholder for avatar upload if needed later -->
                        <button type="button" class="btn btn-outline btn-sm">Change Avatar</button>
                   </form>
                </div>
            </div>
        </div>

        <!-- Details Form -->
        <div class="dashboard-card col-span-8">
            <div class="card-header">
                <h3 class="card-title">Profile Details</h3>
            </div>
            <form method="post" class="account-form">
                {% csrf_token %}
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--dash-text-main);">First Name</label>
                        <input type="text" name="first_name" value="{{ user.profile.first_name }}" class="form-control" style="width: 100%; padding: 10px; border: 1px solid var(--dash-border); border-radius: 8px;">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--dash-text-main);">Last Name</label>
                        <input type="text" name="last_name" value="{{ user.profile.last_name }}" class="form-control" style="width: 100%; padding: 10px; border: 1px solid var(--dash-border); border-radius: 8px;">
                    </div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--dash-text-main);">Bio</label>
                    <textarea name="bio" rows="4" class="form-control" style="width: 100%; padding: 10px; border: 1px solid var(--dash-border); border-radius: 8px;">{{ user.profile.bio }}</textarea>
                </div>

                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 500; color: var(--dash-text-main);">Expertise (comma separated)</label>
                    <input type="text" name="credentials" value="{% for cred in user.profile.credentials %}{{ cred.title }}{% if not forloop.last %}, {% endif %}{% endfor %}" class="form-control" style="width: 100%; padding: 10px; border: 1px solid var(--dash-border); border-radius: 8px;">
                </div>

                <div style="text-align: right;">
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}
