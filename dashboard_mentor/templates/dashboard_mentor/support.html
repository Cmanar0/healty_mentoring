{% extends "dashboard_mentor/base.html" %}
{% load static %}

{% block page_title %}Support{% endblock %}

{% block dashboard_content %}
<div class="dashboard-content-container">
    <div class="dashboard-card" style="max-width: 900px; margin: 0 auto;">
        <div class="dashboard-card-header">
            <h1 class="dashboard-card-title">
                <i class="fas fa-headset"></i> Support
            </h1>
            <p class="dashboard-card-subtitle">Get help and support for your mentoring journey</p>
        </div>
        
        <div class="dashboard-card-body">
            <div style="display: flex; flex-direction: column; gap: 32px;">
                <!-- Support Options -->
                <div>
                    <h2 style="font-size: 1.25rem; font-weight: 600; color: var(--dash-text-main); margin-bottom: 20px;">
                        <i class="fas fa-question-circle" style="color: var(--dash-primary); margin-right: 8px;"></i>
                        How can we help you?
                    </h2>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <!-- FAQ Card -->
                        <div style="padding: 24px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; transition: all 0.2s;">
                            <div style="font-size: 2rem; color: var(--dash-primary); margin-bottom: 12px;">
                                <i class="fas fa-book"></i>
                            </div>
                            <h3 style="font-size: 1.1rem; font-weight: 600; color: var(--dash-text-main); margin-bottom: 8px;">
                                Frequently Asked Questions
                            </h3>
                            <p style="font-size: 0.9rem; color: var(--dash-text-muted); margin-bottom: 16px;">
                                Find answers to common questions about using the platform
                            </p>
                            <button type="button" class="btn btn-outline" style="width: 100%;">
                                View FAQ
                            </button>
                        </div>
                        
                        <!-- Submit Ticket Card -->
                        <div style="padding: 24px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; transition: all 0.2s;">
                            <div style="font-size: 2rem; color: var(--dash-primary); margin-bottom: 12px;">
                                <i class="fas fa-ticket-alt"></i>
                            </div>
                            <h3 style="font-size: 1.1rem; font-weight: 600; color: var(--dash-text-main); margin-bottom: 8px;">
                                Submit Support Ticket
                            </h3>
                            <p style="font-size: 0.9rem; color: var(--dash-text-muted); margin-bottom: 16px;">
                                Submit a ticket for personalized assistance with any issues
                            </p>
                            <button type="button" class="btn btn-outline" style="width: 100%;" onclick="document.getElementById('ticketForm').scrollIntoView({behavior: 'smooth', block: 'center'});">
                                Submit Ticket
                            </button>
                        </div>
                        
                        <!-- Documentation Card -->
                        <div style="padding: 24px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 12px; transition: all 0.2s;">
                            <div style="font-size: 2rem; color: var(--dash-primary); margin-bottom: 12px;">
                                <i class="fas fa-file-alt"></i>
                            </div>
                            <h3 style="font-size: 1.1rem; font-weight: 600; color: var(--dash-text-main); margin-bottom: 8px;">
                                Documentation
                            </h3>
                            <p style="font-size: 0.9rem; color: var(--dash-text-muted); margin-bottom: 16px;">
                                Browse guides and tutorials to get the most out of the platform
                            </p>
                            <button type="button" class="btn btn-outline" style="width: 100%;">
                                View Docs
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div>
                    <h2 style="font-size: 1.25rem; font-weight: 600; color: var(--dash-text-main); margin-bottom: 20px;">
                        <i class="fas fa-link" style="color: var(--dash-primary); margin-right: 8px;"></i>
                        Quick Links
                    </h2>
                    
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        <a href="/dashboard/mentor/profile/" class="support-link" style="display: flex; align-items: center; gap: 12px; padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                            <i class="fas fa-id-badge" style="color: var(--dash-primary); font-size: 1.2rem;"></i>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--dash-text-main);">Profile Setup</div>
                                <div style="font-size: 0.85rem; color: var(--dash-text-muted);">Learn how to set up your mentor profile</div>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--dash-text-muted);"></i>
                        </a>
                        
                        <a href="/dashboard/mentor/my-sessions/" class="support-link" style="display: flex; align-items: center; gap: 12px; padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                            <i class="fas fa-calendar" style="color: var(--dash-primary); font-size: 1.2rem;"></i>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--dash-text-main);">Session Management</div>
                                <div style="font-size: 0.85rem; color: var(--dash-text-muted);">Manage your sessions and availability</div>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--dash-text-muted);"></i>
                        </a>
                        
                        <a href="/dashboard/mentor/settings/" class="support-link" style="display: flex; align-items: center; gap: 12px; padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                            <i class="fas fa-cog" style="color: var(--dash-primary); font-size: 1.2rem;"></i>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--dash-text-main);">Account Settings</div>
                                <div style="font-size: 0.85rem; color: var(--dash-text-muted);">Configure your account preferences</div>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--dash-text-muted);"></i>
                        </a>
                    </div>
                </div>
                
                <!-- Ticket Submission Form -->
                <div id="ticketForm" style="margin-top: 32px;">
                    <h2 style="font-size: 1.25rem; font-weight: 600; color: var(--dash-text-main); margin-bottom: 20px;">
                        <i class="fas fa-ticket-alt" style="color: var(--dash-primary); margin-right: 8px;"></i>
                        Submit a Support Ticket
                    </h2>
                    
                    <form method="post" enctype="multipart/form-data" style="background: white; padding: 24px; border-radius: 12px; border: 1px solid #e2e8f0;">
                        {% csrf_token %}
                        
                        <div style="margin-bottom: 20px;">
                            <label for="{{ form.title.id_for_label }}" style="display: block; font-weight: 600; color: var(--dash-text-main); margin-bottom: 8px;">
                                Title <span style="color: #ef4444;">*</span>
                            </label>
                            {{ form.title }}
                            {% if form.title.errors %}
                                <div style="color: #ef4444; font-size: 0.85rem; margin-top: 4px;">{{ form.title.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div style="margin-bottom: 20px;">
                            <label for="{{ form.description.id_for_label }}" style="display: block; font-weight: 600; color: var(--dash-text-main); margin-bottom: 8px;">
                                Description <span style="color: #ef4444;">*</span>
                            </label>
                            {{ form.description }}
                            {% if form.description.errors %}
                                <div style="color: #ef4444; font-size: 0.85rem; margin-top: 4px;">{{ form.description.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <div style="margin-bottom: 24px;">
                            <label for="{{ form.image.id_for_label }}" style="display: block; font-weight: 600; color: var(--dash-text-main); margin-bottom: 8px;">
                                Image (Optional)
                            </label>
                            <input type="file" name="image" id="{{ form.image.id_for_label }}" accept="image/*" class="form-control" style="padding: 8px;">
                            <small style="color: var(--dash-text-muted); font-size: 0.85rem; display: block; margin-top: 4px;">Maximum file size: 5MB</small>
                            {% if form.image.errors %}
                                <div style="color: #ef4444; font-size: 0.85rem; margin-top: 4px;">{{ form.image.errors }}</div>
                            {% endif %}
                        </div>
                        
                        <button type="submit" class="btn btn-primary" style="width: 100%;">
                            <i class="fas fa-paper-plane"></i> Submit Ticket
                        </button>
                    </form>
                </div>
                
                <!-- User's Recent Tickets -->
                {% if user_tickets %}
                <div style="margin-top: 32px;">
                    <h2 style="font-size: 1.25rem; font-weight: 600; color: var(--dash-text-main); margin-bottom: 20px;">
                        <i class="fas fa-history" style="color: var(--dash-primary); margin-right: 8px;"></i>
                        Your Recent Tickets
                    </h2>
                    
                    <div style="display: flex; flex-direction: column; gap: 12px;">
                        {% for ticket in user_tickets %}
                        <a href="{% url 'general:dashboard_mentor:ticket_detail' ticket.id %}" style="display: flex; align-items: center; gap: 16px; padding: 16px; background: #f8fafc; border: 1px solid #e2e8f0; border-radius: 8px; text-decoration: none; transition: all 0.2s;">
                            <div style="font-size: 1.5rem; color: {% if ticket.status == 'resolved' or ticket.status == 'closed' %}#10b981{% elif ticket.status == 'in_progress' %}#3b82f6{% else %}#f59e0b{% endif %};">
                                <i class="fas fa-ticket-alt"></i>
                            </div>
                            <div style="flex: 1;">
                                <div style="font-weight: 600; color: var(--dash-text-main); margin-bottom: 4px;">{{ ticket.title }}</div>
                                <div style="font-size: 0.85rem; color: var(--dash-text-muted);">
                                    <span style="text-transform: capitalize;">{{ ticket.get_status_display }}</span> â€¢ {{ ticket.created_at|date:"M d, Y" }}
                                </div>
                            </div>
                            <i class="fas fa-chevron-right" style="color: var(--dash-text-muted);"></i>
                        </a>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<style>
.support-link:hover {
    background: #f1f5f9 !important;
    border-color: var(--dash-primary) !important;
    transform: translateX(4px);
}

.support-link:hover .fa-chevron-right {
    color: var(--dash-primary) !important;
}
</style>
{% endblock %}

